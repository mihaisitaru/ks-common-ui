
<!--Login form component-->
<dom-module id="c-login">
  <!--TODO maya5j-->
  <!--See https://github.com/GoogleWebComponents/google-map/blob/master/google-map-marker.html-->
  <!--Polymer library is included in the component. Other libraries are on the client side see-->
  <!--https://github.com/GoogleWebComponents/google-map/blob/master/index.html-->
  <!--Include it here??-->
  <!--link(rel="import" href="https://static.scania.com/vendors/frameworks/bootstrap/3.2.0/dist/js/bootstrap.min.js")-->
  <link rel="import" href="form-field/form-field.html"/>
  <link rel="import" href="variation-1.html"/>
  <template>
    <style>:host {
  display: block;
}
:host .well {
  background-color: #f8f8f8;
  max-width: 600px;
  margin: 15px auto 60px;
  padding: 60px;
}
:host .btn {
  display: block;
  width: 50%;
  padding: 20px;
  margin: 15px auto 0;
}
:host .btn + .btn {
  margin-top: 0;
}

    </style>
<div class="row public">
  <div class="col-sm-10 col-sm-offset-1 col-md-8 col-md-offset-2">
    <h2>{{headline}}</h2>
    <p>{{description}}</p>
    <form class="well">
      <content>
        <c-form-field type="text" name="username" label="Username"></c-form-field>
        <c-form-field type="password" name="password" label="Password"></c-form-field>
      </content>

      <!-- Should show a notification component here instead -->
      <template is="dom-if" if="{{showMessage}}">
        <div class$="alert alert-{{messageType}}">{{message}}</div>
      </template>

      <button type="submit" class="btn btn-primary">Log in</button>
      <button type="button" class="btn btn-link" on-click="forgotpassword">Forgot your password</button>
    </form>
  </div>
</div>

<!-- <template is="dom-if" if="{{link}}">
  <div class="btn-container">
    <a href="{{link}}" class="btn btn-primary">{{linkText}}</a>
  </div>
</template> -->
  </template>
  <script>var name = 'c-login'; Polymer({
    is: name,
    properties: {
        headline: {
            type: String
        },
        description: {
            type: String
        },
        // Should be moved to a notification component
        message: {
            type: String
        },
        messageType: {
            type: String
        },
        event: {
            type: String,
            value: 'login'
        },
        forgotpassword: {
            type: Boolean,
            value: false
        },
        showMessage: {
            type: Boolean,
            value: false
        }
    },
    ready: function () {
        var self = this;
        this.querySelector('form').addEventListener('submit', function (event) {
            event.preventDefault();
            var inputs = this.querySelectorAll('input'), data = {};
            for (var i = 0; i < inputs.length; i++) {
                data[inputs[i].name] = inputs[i].value;
            }
            self.login(data);
        });
        // Should be moved to a notification component
        document.addEventListener('notify', function (event) {
            self.showMessage = true;
            self.message = event.data.message;
            self.messageType = event.data.type === 'error' ? 'danger' : event.data.type;
        });
    },
    login: function (data) {
        var self = this;
        AppEventStore.apply({ name: 'login', action: this.event, data: data });
    },
    forgotpassword: function () {
        AppEventStore.apply({ name: 'login', action: 'forgotpassword' });
    }
});

  </script>
</dom-module>