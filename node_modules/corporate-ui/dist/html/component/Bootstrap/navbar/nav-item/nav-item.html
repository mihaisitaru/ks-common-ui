
<!---->
<dom-module id="nav-item">
  <!--TODO maya5j-->
  <!--See https://github.com/GoogleWebComponents/google-map/blob/master/google-map-marker.html-->
  <!--Polymer library is included in the component. Other libraries are on the client side see-->
  <!--https://github.com/GoogleWebComponents/google-map/blob/master/index.html-->
  <!--Include it here??-->
  <!--link(rel="import" href="https://static.scania.com/vendors/frameworks/bootstrap/3.2.0/dist/js/bootstrap.min.js")-->
  <template>
    <style>:host-context(c-main-navigation) ::content a {
  position: relative;
  display: block;
  padding: 10px 15px;
}
:host-context(c-corporate-header) ::content a,
:host-context(c-main-navigation) ::content a {
  padding-top: 10px;
  padding-bottom: 10px;
  line-height: 20px;
}
@media (min-width: 768px) {
  :host-context(c-corporate-header) ::content a,
  :host-context(c-main-navigation) ::content a {
    padding-top: 15px;
    padding-bottom: 15px;
  }
}
:host-context(c-main-navigation) ::content a {
  color: #777;
}
:host-context(c-main-navigation) ::content a:hover,
:host-context(c-main-navigation) ::content a:focus {
  color: #333;
  background-color: transparent;
}
:host-context(c-corporate-header) ::content a {
  font-family: "Scania Sans";
  font-weight: normal;
  font-size: 12px;
  color: #747472;
}
:host-context(c-corporate-header) ::content a {
  padding: 15px;
}
:host-context(c-main-navigation) ::content a {
  padding: 20px 0;
  white-space: nowrap;
  background-color: transparent;
}
:host-context(c-main-navigation) ::content a:before,
:host-context(c-main-navigation) ::content a:after {
  content: "";
  padding: 0 15px;
}
.app :host-context(c-main-navigation) ::content a,
:host-context(.app c-main-navigation) ::content a {
  padding-top: 16px;
  padding-bottom: 16px;
}
.app :host-context(c-main-navigation) ::content a:first-child:before,
:host-context(.app c-main-navigation) ::content:first-child a:before {
  padding-right: 0;
}
:host-context(sub-navigation) ::content + nav-item a,
:host-context(sub-navigation) ::content a {
  font-family: "Scania Sans";
  text-transform: none;
  position: relative;
}
:host-context(sub-navigation).active ::content a:after,
:host-context(sub-navigation) ::content + nav-item a.active:after,
:host-context(sub-navigation) ::content + nav-item a:hover:after,
:host-context(sub-navigation) ::content a.active:after,
:host-context(sub-navigation) ::content a:hover:after {
  content: "";
  border-bottom: 2px solid #d6001c;
  position: absolute;
  left: 15px;
  right: 15px;
  bottom: 15px;
  margin-bottom: -2px;
}
.app :host-context(sub-navigation) ::content + nav-item a,
.app :host-context(sub-navigation) ::content a,
:host-context(.app sub-navigation) ::content a {
  padding-top: 8px;
  padding-bottom: 8px;
}
.app :host-context(sub-navigation) ::content + nav-item a.active:after,
.app :host-context(sub-navigation) ::content + nav-item a:hover:after,
.app :host-context(sub-navigation) ::content a.active:after,
.app :host-context(sub-navigation) ::content a:hover:after,
:host-context(.app sub-navigation) ::content.active a:after,
:host-context(.app sub-navigation) ::content a.active:after,
:host-context(.app sub-navigation) ::content a:hover:after {
  bottom: 8px;
}
:host-context(c-main-navigation) ::content a {
  color: #909090;
}
:host-context(c-main-navigation) ::content a:hover {
  color: #041e42;
}
:host-context(c-main-navigation) ::content + nav-item a:before {
  border-left: 1px solid #e2e2e2;
}
@media (max-width: 991px) {
  :host-context(c-main-navigation) ::content a,
  .app :host-context(c-main-navigation) ::content a,
  :host-context(.app c-main-navigation) ::content a {
    padding: 10px 25px;
    margin-left: 0;
    border-bottom: 1px solid #e2e2e2;
  }
  :host-context(c-main-navigation) ::content a:hover,
  .app :host-context(c-main-navigation) ::content a:hover {
    text-decoration: none;
  }
  :host-context(c-main-navigation) ::content a:before,
  .app :host-context(c-main-navigation) ::content a:before,
  :host-context(c-main-navigation) ::content a:after,
  .app :host-context(c-main-navigation) ::content a:after {
    content: none !important;
  }
}
@media (max-width: 767px) {
  :host-context(c-corporate-header) ::content a,
  :host-context(c-main-navigation) ::content a {
    line-height: 18px;
    border-bottom: 1px solid #eee;
  }
}
:host {
  display: inline-block;
}
:host-context(c-main-navigation) ::content a {
  text-transform: uppercase;
}
:host-context(c-main-navigation) ::content a.mode-toggler {
  display: none;
}
:host-context(c-main-navigation) ::content a span {
  line-height: inherit;
}
:host-context(sub-navigation) ::content + nav-item a,
:host-context(sub-navigation) ::content a {
  text-transform: none;
  padding: 15px;
  font-weight: normal;
}
:host-context(sub-navigation) ::content + nav-item a:before,
:host-context(sub-navigation) ::content a:before,
:host-context(sub-navigation) ::content + nav-item a:after,
:host-context(sub-navigation) ::content a:after {
  padding: 0;
}
:host-context(sub-navigation) ::content + nav-item a:before,
:host-context(sub-navigation) ::content a:before {
  display: none;
}
:host-context(.app sub-navigation) ::content a {
  padding-left: 15px;
  padding-right: 15px;
}
:host-context(.app sub-navigation) ::content a:after {
  padding: 0;
}
:host-context(.nav-pills):first-child {
  padding-left: 0;
}
:host-context(.nav-tabs) {
  border: 0;
  display: inline-block;
  border-right: 1px solid #e2e2e2;
}
:host-context(.nav-tabs):first-child {
  border-left: 1px solid #e2e2e2;
}
@media (max-width: 991px) {
  :host {
    display: block;
  }
  :host-context(c-main-navigation) ::content > a {
    padding: 10px 25px !important;
  }
  :host-context(c-main-navigation).expanded {
    display: flex;
    flex-direction: column-reverse;
  }
  :host-context(c-main-navigation).expanded ::content .mode-toggler:before {
    content: "-";
  }
  :host-context(c-main-navigation) ::content a.mode-toggler {
    display: block;
    position: relative;
    z-index: 1;
    float: right;
    padding: 10px;
    border: 0;
  }
  :host-context(c-main-navigation) ::content a.mode-toggler:before {
    content: "+";
    padding: 10px;
    border: 0;
  }
  :host-context(.app c-main-navigation).expanded {
    display: flex;
    flex-direction: column-reverse;
  }
  :host-context(.app c-main-navigation).expanded ::content .mode-toggler:before {
    content: "-";
  }
  :host-context(.app c-main-navigation) ::content a.mode-toggler {
    display: block;
    position: relative;
    z-index: 1;
    float: right;
    padding: 10px;
    border: 0;
  }
  :host-context(.app c-main-navigation) ::content a.mode-toggler:before {
    content: "+";
    padding: 10px;
    border: 0;
  }
  :host-context(sub-navigation) ::content > a {
    padding: 10px 35px !important;
  }
  :host-context(.app sub-navigation) ::content > a {
    padding: 10px 35px !important;
  }
}

    </style>
<template is="dom-if" if="{{isSubNav}}">
  <a href on-tap="toggleExpand" class="mode-toggler"></a>
</template>

<content></content>
  </template>
  <script>var name = 'nav-item'; Polymer({
    is: name,
    properties: {
        variation: 0,
        fullbleed: {
            type: Boolean,
            value: true
        },
        text: {
            type: String
        },
        location: {
            type: String
        },
        active: {
            type: String,
            observer: 'setActive'
        }
    },
    created: function () {
        this.classes = this.className; // Store default classlist without state included
    },
    attached: function () {
        var child = this.firstChild, texts = [];
        while (child) {
            if (child.nodeType == 3) {
                texts.push(child.data);
                child.data = '';
            }
            child = child.nextSibling;
        }
        var text = texts.join('').trim();
        if (text) {
            var anchor = document.createElement('a');
            anchor.innerText = text;
            anchor.href = this.location;
            this.appendChild(anchor);
        }
        if (this.hasClass(this, 'active')) {
            this.toggleExpand(this._getEvent());
        }
        if (this.active && this.active.toString() == 'true') {
            this.classList.add('active');
        }
        this.onclick = (function () {
            this.active = true;
        }).bind(this);
    },
    setActive: function (newState) {
        if (newState.toString() == 'true') {
            this.classList.add('active');
            this.async(function () {
                this.fire('navItem-active');
            });
        }
        else {
            this.classList.remove('active');
        }
    },
    hasClass: function (element, className) {
        return element.className.split(' ').indexOf(className) > -1;
    },
    toggleExpand: function (e) {
        e.preventDefault();
        var state = this.hasClass(this, 'expanded') ? ' collapsed' : ' expanded';
        this.className = this.classes + state;
        // this.mode = ['expand', 'collapse'].find(x => x !== this.mode); // Another way of doing the same :)
    }
});

  </script>
</dom-module>