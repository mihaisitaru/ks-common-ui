
<!--
<demo>
</demo>-->
<dom-module id="toolbox-panel">
  <!--TODO maya5j-->
  <!--See https://github.com/GoogleWebComponents/google-map/blob/master/google-map-marker.html-->
  <!--Polymer library is included in the component. Other libraries are on the client side see-->
  <!--https://github.com/GoogleWebComponents/google-map/blob/master/index.html-->
  <!--Include it here??-->
  <!--link(rel="import" href="https://static.scania.com/vendors/frameworks/bootstrap/3.2.0/dist/js/bootstrap.min.js")-->
  <script src="/vendors/frameworks/angular/1.5.5/angular.min.js"></script>
  <script src="https://rawgithub.com/angular-ui/ui-sortable/master/src/sortable.js"></script>
  <template>
    <style>:host {
  display: block;
}
:host > div {
  transition: margin-right 300ms ease-in-out;
}
:host > div.closed {
  margin-right: -200px;
}
:host .tab {
  transform: translateX(-100%);
  display: inline-block;
}

    </style><div ng-controller="Toolbox as toolbox" ng-class="{closed: toolbox.closed}">
  <a href="" class="tab" ng-click="toolbox.closed = !toolbox.closed">flik</a>
  <ul class="list-group">
    <li ng-repeat="category in toolbox.categories" class="list-group-item">
      <strong>{{::category.name}}</strong>
      <ul class="list-group" ng-model="category.children" ui-sortable="::toolbox.options">
        <li ng-repeat="component in category.children" class="list-group-item component" ng-if="component.name !== 'main-content' && !component.extension">
          <strong data-url="/component.html?t={{::category.name}}&c={{::component.name}}">{{::component.name}}</strong>
        </li>
      </ul>
    </li>
  </ul>
</div>
  </template>
  <script>var name = 'toolbox-panel'; Polymer({
    is: name,
    properties: {
        headline: String,
        description: String
    },
    ready: function () {
        angular.module('app', ['ui.sortable'])
            .controller('Toolbox', Toolbox);
        angular.bootstrap(this, ['app']);
        function Toolbox($scope, $http) {
            var vm = this;
            vm.closed = true;
            vm.categories = [];
            vm.options = {
                connectWith: '.ui-sortable',
                start: function (e, ui) {
                    //e.toElement.outerHTML = '<figure class="panel panel-default lobipanel lobipanel-sortable" data-inner-id="pPpBqCnrf7" data-index="0"><header class="panel-heading">customers<div class="dropdown"><ul class="dropdown-menu dropdown-menu-right"><li><a data-func="close" data-tooltip="Close" data-toggle="tooltip" data-title="Close" data-placement="bottom" data-original-title="" title=""><i class="panel-control-icon glyphicon glyphicon-remove"></i><span class="control-title">Close</span></a></li></ul><div class="dropdown-toggle" data-toggle="dropdown"><span class="panel-control-icon glyphicon glyphicon-cog"></span></div></div></header><div class="panel-body">apa</div></figure>';
                    //debugger
                    //AppEventStore.apply({ name: 'dashboard', action: 'toolbox.sortstart' });
                },
                update: function (e, ui) {
                    console.log('update');
                },
                stop: function (e, ui) {
                    //AppEventStore.apply({ name: 'dashboard', action: 'toolbox.sortstop' });
                },
                beforeStop: function (e, ui) {
                    //debugger
                }
            };
            $http.get('data?path=html/component').then(function (response) {
                vm.categories = response.data.children;
            }, function (response) {
                console.error(response);
            });
        }
    }
});

  </script>
</dom-module>