
<!--A dashboard component used to show choosen components in page-->
<dom-module id="c-dashboard">
  <!--TODO maya5j-->
  <!--See https://github.com/GoogleWebComponents/google-map/blob/master/google-map-marker.html-->
  <!--Polymer library is included in the component. Other libraries are on the client side see-->
  <!--https://github.com/GoogleWebComponents/google-map/blob/master/index.html-->
  <!--Include it here??-->
  <!--link(rel="import" href="https://static.scania.com/vendors/frameworks/bootstrap/3.2.0/dist/js/bootstrap.min.js")-->
  <script src="/vendors/frameworks/jQuery/2.2.2/dist/jquery.min.js"></script>
  <script src="https://static.scania.com/vendors/frameworks/jQuery/jQuery-ui/1.10.3/jquery-ui.min.js"></script>
  <script src="/vendors/frameworks/bootstrap/3.2.0/dist/js/bootstrap.js"></script>
  <script src="https://static.scania.com/vendors/components/jQuery/lobipanel/dist/js/lobipanel.min.js"></script>
  <link rel="import" href="toolbox-panel/toolbox-panel.html"/>
  <link rel="import" href="variation-1.html"/>
  <template>
    <link rel="stylesheet" href="https://static.scania.com/vendors/components/jQuery/lobipanel/dist/css/lobipanel.css"/>
    <style>:host main.cols-1 ::content > figure,
:host main.cols-2 ::content > figure,
:host main.cols-3 ::content > figure,
:host main.cols-4 ::content > figure,
:host main.cols-5 ::content > figure,
:host main.cols-6 ::content > figure,
:host main.cols-7 ::content > figure,
:host main.cols-8 ::content > figure,
:host main.cols-9 ::content > figure,
:host main.cols-10 ::content > figure,
:host main.cols-11 ::content > figure,
:host main.cols-12 ::content > figure {
  position: relative;
  min-height: 1px;
  padding-right: 15px;
  padding-left: 15px;
}
:host main.cols-1 ::content > figure,
:host main.cols-2 ::content > figure,
:host main.cols-3 ::content > figure,
:host main.cols-4 ::content > figure,
:host main.cols-5 ::content > figure,
:host main.cols-6 ::content > figure,
:host main.cols-7 ::content > figure,
:host main.cols-8 ::content > figure,
:host main.cols-9 ::content > figure,
:host main.cols-10 ::content > figure,
:host main.cols-11 ::content > figure,
:host main.cols-12 ::content > figure {
  float: left;
}
:host main.cols-1 ::content > figure {
  width: 100%;
}
:host main.cols-2 ::content > figure {
  width: 50%;
}
:host main.cols-3 ::content > figure {
  width: 33.33333333%;
}
:host main.cols-4 ::content > figure {
  width: 25%;
}
:host main.cols-5 ::content > figure,
:host main.cols-6 ::content > figure,
:host main.cols-7 ::content > figure,
:host main.cols-8 ::content > figure,
:host main.cols-9 ::content > figure,
:host main.cols-10 ::content > figure,
:host main.cols-11 ::content > figure {
  width: 16.66666667%;
}
:host main.cols-12 ::content > figure {
  width: 8.33333333%;
}
:host {
  display: block;
}
:host > section {
  overflow: hidden;
}
:host main {
  overflow: hidden;
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between;
}
:host main ::content > figure {
  display: flex;
  flex-direction: column;
  border-width: 0;
}
:host main ::content > figure > header,
:host main ::content > figure > div {
  border-color: inherit;
  border-width: 1px;
  border-style: solid;
}
:host main ::content > figure > div {
  border-width: 0 1px 1px;
  flex: 1;
}
:host main ::content p {
  margin-bottom: 0;
}
:host toolbox-panel {
  float: right;
  position: relative;
  z-index: 1;
}
:host toolbox-panel ::content > div {
  width: 200px;
}

    </style><toolbox-panel></toolbox-panel>

<section class="container-fluid">
  <main class$="cols-{{columns}}">
    <content></content>
  </main>
</section>

<!-- <script type="text/javascript">
  <figure class="panel panel-default">
    <header class="panel-heading">heading</header>
    <div class="panel-body">body</div>
  </figure>
</script> -->
  </template>
  <script>var name = 'c-dashboard'; Polymer({
    is: name,
    properties: {
        variation: 0,
        fullbleed: {
            value: true
        },
        columns: {
            type: Number,
            value: 3
        }
    },
    created: function () {
        var items = this.children;
        for (var index in items) {
            var item = items[index], type;
            if (typeof item !== 'object')
                continue;
            type = item.getAttribute('type');
            item.outerHTML = '<figure class="panel panel-default"><header class="panel-heading">' + type + '</header><div class="panel-body">' + item.innerHTML + '</div></figure>';
        }
    },
    ready: function () {
        var self = this;
        var temp = $('<figure class="lobipanel-placeholder"></figure>');
        /*$(this)
          .on('sortstart', function(event) {
            self.columns = self.columns + 1;
            $('figure:nth-child(' + self.columns + 'n)', self).after(temp);
            console.log('start')
          })
          .on('sortupdate', function(event) {
            console.log('update')
          })
          .on('sortstop', function(event) {
            temp.remove();
            self.columns = self.columns - 1;
            console.log('stop')
          });*/
        document.addEventListener('toolbox.sortstart', function (e) {
            $('figure:nth-child(' + self.columns + 'n)', self).after(temp);
            self.columns = self.columns + 1;
            console.log('start');
        }, false);
        document.addEventListener('toolbox.sortstop', function (e) {
            temp.remove();
            self.columns = self.columns - 1;
            console.log('stop');
        }, false);
        $('.panel', this)
            .lobiPanel({
            sortable: true,
            reload: false,
            editTitle: false,
            unpin: false,
            expand: false,
            minimize: false
        });
    },
    attached: function () {
        window.$ = window.jQuery = window.preJQuery;
    }
});

  </script>
</dom-module>