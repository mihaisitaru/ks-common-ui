
<!---->
<dom-module id="c-tiled-display">
  <!--TODO maya5j-->
  <!--See https://github.com/GoogleWebComponents/google-map/blob/master/google-map-marker.html-->
  <!--Polymer library is included in the component. Other libraries are on the client side see-->
  <!--https://github.com/GoogleWebComponents/google-map/blob/master/index.html-->
  <!--Include it here??-->
  <!--link(rel="import" href="https://static.scania.com/vendors/frameworks/bootstrap/3.2.0/dist/js/bootstrap.min.js")-->
  <link rel="import" href="variation-1.html"/>
  <link rel="import" href="variation-2.html"/>
  <script src="https://static.scania.com/vendors/components/jQuery/slick/1.6.0/slick.min.js"></script>
  <template>
    <link href="https://static.scania.com/vendors/components/jQuery/slick/1.6.0/slick.css" rel="stylesheet"/>
    <style>::content .slick-dots li button:before {
  content: 'â€¢';
}

    </style><div>
</div>
  </template>
  <script>var name = 'c-tiled-display'; Polymer({
    is: name,
    properties: {
        headline: {
            type: String,
            value: 'Some Title'
        },
        description: {
            type: String,
            value: 'some text'
        },
        btnText: {
            type: String,
            value: 'button text'
        }
    },
    // These conditionals takes the images paths and puts into an array. This array is then used as source when building template dom-repeat.
    ready: function () {
        if (this.getAttribute('img1') == null && this.getAttribute('img2') == null) {
            this.imgarray = [
                { first: 'https://static.scania.com/resources/images/demo/Tile1.jpg' },
                { first: 'https://static.scania.com/resources/images/demo/Tile2.jpg' }
            ];
        }
        else if (this.getAttribute('img3') == null && this.getAttribute('img4') == null) {
            this.imgarray = [
                { first: this.getAttribute('img1') },
                { first: this.getAttribute('img2') }
            ];
        }
        else if (this.getAttribute('img3') != null && this.getAttribute('img4') != null) {
            this.imgarray = [
                { first: this.getAttribute('img1'), title: this.getAttribute('var2title1'), text: this.getAttribute('var2text1'), btn: this.getAttribute('var2btn1') },
                { first: this.getAttribute('img2'), title: this.getAttribute('var2title1'), text: this.getAttribute('var2text1'), btn: this.getAttribute('var2btn2') },
                { first: this.getAttribute('img3'), title: this.getAttribute('var2title1'), text: this.getAttribute('var2text1'), btn: this.getAttribute('var2btn3') },
                { first: this.getAttribute('img4'), title: this.getAttribute('var2title1'), text: this.getAttribute('var2text1'), btn: this.getAttribute('var2btn4') }
            ];
        }
        this.parentNode.setAttribute('headline', this.attributes.headline.value);
        this.parentNode.setAttribute('description', this.attributes.description.value);
        this.parentNode.setAttribute('btntext', this.attributes.btnText.value);
        this.parentNode.setAttribute('imgarray', JSON.stringify(this.imgarray));
    },
    // function for checking variation, builds corresponding dom-if template.
    checkVariation: function (variation) {
        return variation === this.getAttribute('variation');
    },
    //function not used as of this moment, can perhaps add further optimization.
    info: function (headline, description) {
        return headline || description;
    }
});
//function for Slick. Initializes Slick functionality if window size is below 480.  
function createSlick() {
    var windowWidth = $(window).width();
    if (windowWidth < 480) {
        $(".slick-scroll").not('.slick-initialized').slick({
            infinite: true,
            dots: true
        });
        $('.slick-scroll').slick('slickFilter', function (index) {
            return index < 4;
        });
    }
    else {
        if ($(".slick-scroll").hasClass('slick-initialized')) {
            $('.slick-scroll').slick('unslick');
        }
    }
}
$(window).on('load resize', createSlick);
createSlick();

  </script>
</dom-module>